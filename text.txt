import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:myapp/controller.dart';
import 'package:myapp/widget.dart';

class MusicPlayerScreen extends StatelessWidget {
  const MusicPlayerScreen({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.black,
      body: Container(
        margin: EdgeInsets.only(top: 10),
        padding: EdgeInsets.symmetric(horizontal: 20, vertical: 30),
        height: MediaQuery.of(context).size.height,
        width: MediaQuery.of(context).size.width,
        decoration: BoxDecoration(
            gradient: LinearGradient(colors: [
          Color.fromRGBO(127, 126, 122, 1.0),
          Color.fromRGBO(18, 20, 22, 1.0)
        ], begin: Alignment.topCenter, end: Alignment.bottomCenter)),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Row(
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                Icon(
                  Icons.arrow_back_ios,
                  color: Colors.white,
                  size: 20,
                ),
                Text(
                  "Soft Pop Hits",
                  style: TextStyle(
                      fontSize: 18,
                      color: Colors.white,
                      fontWeight: FontWeight.bold),
                ),
                Icon(
                  Icons.more_horiz_outlined,
                  color: Colors.white,
                )
              ],
            ),
            SizedBox(
              height: 25,
            ),
            Container(
              height: 380,
              decoration: BoxDecoration(
                  borderRadius: BorderRadius.circular(15),
                  image: DecorationImage(
                      image: AssetImage(
                        '$imagePath/album.jpg',
                      ),
                      fit: BoxFit.fill)),
            ),
            SizedBox(
              height: 15,
            ),
            Center(
                child: Text(
              "Taylor Swift",
              style: TextStyle(
                  color: Colors.grey.shade500,
                  fontSize: 24,
                  fontWeight: FontWeight.bold),
            )),
            SizedBox(
              height: 10,
            ),
            Center(
              child: Text(
                "Blank Space",
                style: TextStyle(
                    fontSize: 28,
                    color: Colors.white,
                    fontWeight: FontWeight.bold),
              ),
            ),
            SizedBox(
              height: 5,
            ),
            Obx(
              () => Slider(
                activeColor: Colors.white,
                min: 0.0,
                max: 3.51,
                inactiveColor: Colors.grey.shade800,
                value: Get.find<Counter>().sliderValue.value,
                onChanged: (value) {
                  Get.find<Counter>().sliderValue.value = value;

                  getTimer(value);
                },
              ),
            ),
            Padding(
              padding: const EdgeInsets.symmetric(horizontal: 20.0),
              child: Row(
                mainAxisAlignment: MainAxisAlignment.spaceBetween,
                children: [
                  Obx(
                    () => Text(
                      Get.find<Counter>().showTime.value,
                      style: TextStyle(color: Colors.white70),
                    ),
                  ),
                  Text(
                    "3:31",
                    style: TextStyle(color: Colors.white70),
                  )
                ],
              ),
            ),
            SizedBox(
              height: 15,
            ),
            Row(
              mainAxisAlignment: MainAxisAlignment.spaceAround,
              children: [
                Icon(Icons.shuffle, color: Colors.white, size: 34),
                Icon(Icons.skip_previous, color: Colors.white, size: 34),
                Obx(
                  () => GestureDetector(
                    child: Icon(
                      Get.find<Counter>().isplay.value
                          ? Icons.pause_circle
                          : Icons.play_circle,
                      color: Colors.white,
                      size: 40,
                    ),
                    onTap: () {
                      Get.find<Counter>().isplay.value =
                          !Get.find<Counter>().isplay.value;
                    },
                  ),
                ),
                Icon(Icons.skip_next, color: Colors.white, size: 34),
                Icon(Icons.repeat, color: Colors.white, size: 34)
              ],
            ),
            SizedBox(
              height: 40,
            ),
            Row(
              children: [
                Obx(
                  () => GestureDetector(
                    onTap: () {
                      Get.find<Counter>().isLiked.value =
                          !Get.find<Counter>().isLiked.value;
                    },
                    child: Icon(
                      Get.find<Counter>().isLiked.value
                          ? Icons.favorite
                          : Icons.favorite_border,
                      size: 28,
                      color: Get.find<Counter>().isLiked.value
                          ? Colors.red
                          : Colors.white,
                    ),
                  ),
                ),
                Spacer(),
                Icon(
                  Icons.arrow_downward,
                  size: 28,
                  color: Colors.white,
                ),
                SizedBox(
                  width: 20,
                ),
                Icon(
                  Icons.playlist_play,
                  size: 28,
                  color: Colors.white,
                ),
                SizedBox(
                  width: 20,
                ),
                Icon(
                  Icons.cast,
                  size: 28,
                  color: Colors.white,
                )
              ],
            )
          ],
        ),
      ),
    );
  }
}
